<form [formGroup]="tripForm" (ngSubmit)="onSubmit()">
  <div class="row">
    <div class="col-xs-12 col-sm-9">
      <div class="form-group-box flex-form">
        <mat-form-field>
          <input
            matInput
            placeholder="Trip Name"
            #tripNameInput
            (blur)="onBlurTripNameInput(tripNameInput.value)" 
            type="text" 
            id="tripName"
            formControlName="tripName">
        </mat-form-field>
        <mat-form-field>
          <input
            matInput
            placeholder="Destination"
            #destinationInput
            (blur)="onBlurDestinationInput(destinationInput.value)"
            matInput
            formControlName="destination" 
            [matAutocomplete]="auto"
            [matAutocompleteConnectedTo]="origin">
          <mat-autocomplete #auto="matAutocomplete" [displayWith]="displayFn">
            <mat-option *ngFor="let option of destinationOptions" [value]="option">{{ option.matching_full_name }}</mat-option>
          </mat-autocomplete>
        </mat-form-field>
        <mat-form-field>
          <input
            matInput
            placeholder="From"
            #startDateInput
            (blur)="onBlurStartDateInput(startDateInput.value)"  
            type="date" 
            id="startDate"
            formControlName="startDate">
        </mat-form-field>
        <mat-form-field>
          <input
            matInput
            placeholder="To"
            #endDateInput
            (blur)="onBlurEndDateInput(endDateInput.value)"  
            type="date" 
            id="endDate"
            formControlName="endDate">
        </mat-form-field>
      </div>
      <mat-form-field class="example-chip-list">
        <mat-chip-list #chipList>
            <mat-chip *ngFor="let participant of formValues.participants">
              {{ participant.username }}
            <mat-icon matChipRemove (click)="onRemoveParticipant(participant.email)">cancel</mat-icon>
            </mat-chip>
        </mat-chip-list>
      </mat-form-field>
    </div>
    <div class="col-xs-12 col-sm-3">
      <div formArrayName="participants" class="form-group-box">
        <p>Participants</p>
        <mat-form-field>
          <input  
            matInput
            placeholder="Username"
            [errorStateMatcher]="matcher"
            type="text"
            [(ngModel)]="username" 
            [ngModelOptions]="{standalone: true}">
          <mat-error *ngIf="true">
            Please username is <strong>required</strong>
          </mat-error>
        </mat-form-field>
        <mat-form-field>
          <input 
            matInput 
            placeholder="Email"
            type="text"
            [(ngModel)]="email" 
            [ngModelOptions]="{standalone: true}">
            <!-- <mat-error *ngIf="true">
              Please enter a valid email address
            </mat-error> -->
            <!-- <mat-error *ngIf="true">
              Email is <strong>required</strong>
            </mat-error> -->
        </mat-form-field>
        <button 
          type="button"
          class="btn btn-blue btn-full-width"
          (click)="onAddAnotherParticipant(username, email)">
          Add {{ username }}
        </button> 
      </div>
      <div class="box-buttons">
        <button type="submit" class="btn btn-success">{{ greenBtnLabel }}</button>
        <button type="button" class="btn btn-blue">Cancel changes</button>
        <button type="button" class="btn btn-danger" *ngIf="editMode">Delete trip</button>
      </div>
    </div>
  </div>

</form> 
